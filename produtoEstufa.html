<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Prototipei</title>
        <link href="../src/css/estilizacaoPadrao.css" rel="stylesheet" type="text/css">
    </head>

    <body>
       <!-- NAVBAR -->
       <header>
        <div class="navbar">
            <a href="home.html"><img class="logoNavbar" src="../src/Imagens/logoReduzidaAzul.png" alt="Logo"></a>
            
            <div class="divLinks">
                <a href="home.html#secaoProdutosHome"><p class="textoPadrao">Produtos</p></a>
                <a href="home.html#secaoAgendeConsultoriaHome"><p class="textoPadrao">Consultoria</p></a>
                <a href="home.html#secaoSobreNosHome"><p class="textoPadrao">Sobre nós</p></a>
                <a href="perfil.html">
                    <div class="divPerfil">

                        <!-- SVG do perfil -->
                        <svg width="67" height="67" viewBox="0 0 67 67" fill="#F1F0EC" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M4 33.5C4 17.2076 17.2076 4 33.5 4C49.7924 4 
                            63 17.2076 63 33.5C63 38.6063 61.7026 43.4095 59.4196 47.5981C55.5332 41.6718 44.9873 37.1729 
                            33.5 37.1729C22.0012 37.1729 11.1313 41.0519 7.12419 46.7267C5.12531 42.7485 4 38.2556 4 33.5ZM33.5 
                            0C14.9985 0 0 14.9985 0 33.5C0 52.0015 14.9985 67 33.5 67C52.0015 67 67 52.0015 67 33.5C67 14.9985 
                            52.0015 0 33.5 0ZM41.496 18.7692C41.496 23.4241 37.8342 27.0383 33.5 27.0383C29.1658 27.0383 25.504 
                            23.4241 25.504 18.7692C25.504 14.1142 29.1658 10.5 33.5 10.5C37.8342 10.5 41.496 14.1142 41.496 
                            18.7692ZM13.2456 54.3959L9.73004 50.2901C10.3091 48.7041 12.0583 46.7278 15.8337 44.8633C20.3811 
                            42.6175 26.7563 41.1729 33.5 41.1729C40.1429 41.1729 46.3373 42.8253 50.7452 45.2736C54.3085 47.2528 
                            56.0904 49.3564 56.7234 51.0725L53.4059 54.2834L48.9229 57.6113L43.632 60.1536L38.4589 61.4307L33.1399 
                            61.9747L27.1783 61.2356L22.8706 60.1567L17.5775 57.6117L13.2456 54.3959ZM33.5 31.0383C40.1278 31.0383 
                            45.496 25.5479 45.496 18.7692C45.496 11.9904 40.1278 6.5 33.5 6.5C26.8722 6.5 21.504 11.9904 21.504 
                            18.7692C21.504 25.5479 26.8722 31.0383 33.5 31.0383Z" fill="#0352A8"/>
                        </svg> 
                    </div>
                </a>

                <a href="carrinho.html">
                    <div class="divCarrinho">

                        <!-- SVG do carrinho -->
                        <svg width="65" height="62" viewBox="0 0 65 62" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M2.70898 2.70833H13.5423L20.8007 38.9729C21.0483 40.2198 21.7267 41.3399 22.7169 
                            42.1371C23.7072 42.9342 24.9463 43.3577 26.2173 43.3333H52.5423C53.8133 43.3577 55.0525 42.9342 
                            56.0427 42.1371C57.033 41.3399 57.7113 40.2198 57.959 38.9729L62.2923 16.25H16.2507M27.084 
                            56.875C27.084 58.3708 25.8714 59.5833 24.3757 59.5833C22.8799 59.5833 21.6673 58.3708 21.6673 
                            56.875C21.6673 55.3792 22.8799 54.1667 24.3757 54.1667C25.8714 54.1667 27.084 55.3792 27.084 
                            56.875ZM56.8757 56.875C56.8757 58.3708 55.6631 59.5833 54.1673 59.5833C52.6715 59.5833 51.459 
                            58.3708 51.459 56.875C51.459 55.3792 52.6715 54.1667 54.1673 54.1667C55.6631 54.1667 56.8757 
                            55.3792 56.8757 56.875Z" 
                            stroke="#095DB7" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" fill="#F1F0EC"/>
                        </svg>
                    </div>
                </a>
            </div>
        </div>
    </header>

        <main>
            <!-- SEÇÃO DA COMPRA DO PRODUTO (PARTE AZUL) -->
        <section style="margin-top: 11vh;">
            <section class="secaoDescricaoProduto">    
                        <div class="padroesSecaoFlexDirectionRow" style="width: 55%; justify-content: center;">
                            <!-- Imagem da estufa -->
                             <div>
                                <img class="" src="../src/Imagens/imagemEstufaHome.png" alt="Estufa Portátil Inteligente">

                                <button class="botaoCarrinho">
                                    <span class="material-symbols-outlined" style="color: #F1F0EC; font-size: 30pt; text-align: center; 
                                    justify-content: center;" onclick="window.location.href = 'carrinho.html'">
                                        add_shopping_cart</span>
                                </button>
                             </div>

                            <!-- Informações do produto -->
                            <div style="justify-content: center;">
                                <p class="tituloPadraoBranco" style="text-align: left;">PÉ DE FEIJÃO: ESTUFA PORTÁTIL<br> INTELIGENTE</p>

                                <br> <br>

                                <p class="textoPadraoBranco">Frete: <br><p class="tituloPadraoBranco" style="text-align: left;">R$12,00</p></p>
                                <p class="textoPadraoBranco" id="Endereço"></p>

                                <br><br>

                                <div class="secaoRotasFlexDirectionRow">
                                    <p class="tituloPadraoBranco" style="text-align: left;">R$400,00</p>
                                    <p class="textoPadraoBranco" style="align-self: center;" id="estoque"></p>
                                </div>

                                <br> <br>
                                
                                <div style="text-align: left;">
                                    <button class="botaoBranco" onclick="window.location.href = 'finalizarCompra1.html'">COMPRAR</button>
                                </div>
                            </div>
                        </div>
            </section>

            <div style="border-bottom: 13.9vw solid #0352A8" class="separadorBaixo">
            </div>

        </section>

        <br><br><br><br>

        <!-- BOTÕES QUE TROCAM ENTRE O PRODUTO E OS TERMOS DE COMPRA -->
        <section class="margemPadrao" style="padding-bottom: 3%; padding-top: 0%">
            <div class="padroesSecaoFlexDirectionRow" style="padding: 0%; padding-left: 50%;">
                    <!-- Botão de produto -->
                    <button class="botaoTab active" data-tab-target="#divGrid-secaoCompraProduto" style="width: 15%;">
                        <p class="textoPadrao" style="text-align: center;">PRODUTO</p>
                    </button>
                    <!-- Botão de termos de compra -->
                    <button class="botaoTab" data-tab-target="#secaoTermosDeCompra">
                        <p class="textoPadrao" style="text-align: center;" data-tab-target="#secaoTermosDeCompra">TERMOS DE COMPRA</p>
                    </button>
            </div>
        </section>

        <!-- PRODUTO - ESTUFA -->
        <section id="divGrid-secaoCompraProduto" data-tab-content class="active margemPadrao" style="padding-top: 0%;">
            <div class="gridDoisEspacos">
                <!-- DESCRIÇÃO DO PRODUTO - ESTUFA -->
                <div style="width: 50%;">
                    <fieldset class="divBordaAzul fieldsetSensorGas">
                        <legend class="tituloPequeno" style="margin-left: 2%;">Descrição</legend>
                        <p class="textoPadrao" style="margin: 5%;">
                            A estufa portátil inteligente Pé de Feijão é um produto da Prototipei em que há um monitoramento por meio de um sistema 
                            embarcado.
                            <br> <br>
                            Feito de MDF, O produto contém 28,5 cm de largura, 70cm de altura e 36 cm de comprimento.
                            <br> <br>
                            Cor: MDF cru.
                            <br> <br>
                            A estufa vem acompanhada de:<br>
                    
                            <b>1.</b> Manual de Instrução; <br>
                            <b>2.</b>  Um rolo de polietileno de 1,30 cm x 0.30 cm; <br>
                            <b>3.</b> 35 parafusos para montagem da estufa. <br>
                            <br> <br>
                    A Prototipei oferece 12 meses de garantia para problemas no circuito elétrico.
                        </p>
                    </fieldset>
                </div>
        
                <!--  AVALIAÇÃO DOS CLIENTES - SENSOR DE GASES -->
                <div id="divAvaliacaoProduto-divGrid-secaoDescricaoProduto" style="width: 50%;">
                    <fieldset id="fieldsetSensorGas" class="divBordaAzul fieldsetSensorGas" style="overflow: scroll; height: 70vh;">
                        <legend>
                            <!-- Classe para colocar os ícones do google -->
                            <span class="material-symbols-outlined" style="color: #0352A8;">gradegradegradegradestar_half</span>
                        </legend>

                        <!-- ORGANIZAÇÃO DAS DIVS DAS AVALIAÇÕES -->
                        <div id="divBarrasAvaliacao-divAvaliacaoProduto-divDadosProduto-secaoDescricaoProduto">
                            <div class="divAvaliacoes">
                                <div class="divProgresso"></div>
                            </div>
                        </div>
                        

                        <div>
                            <p class="tituloPequeno" style="text-align: center;">COMENTÁRIOS:</p>
                            <!-- Avaliação 1 -->
                            <div id="avaliacao1-">
                                <div id="" class="" style="display: grid; grid-template-columns: 2fr 1fr; margin: 5%;">
                                    <p class="tituloPequeno">João da Silva Pereira</p>
                                    <span class="material-symbols-outlined" style="text-align: right; margin: 5%; color: #0352A8;"> gradegradegradegradegrade</span>
                                </div>

                                <p id="" class="textoPadrao" style="margin: 5%;">Estou muito satisfeito com o produto. Impecável! Comprei para a minha sobrinha e ela amou!</p>
                            </div>

                            <hr>
                            <!-- Avaliação 2 -->
                            <div id="avaliacao2-">
                                <div id="" class="" style="display: grid; grid-template-columns: 2fr 1fr; margin: 5%;">
                                    <p class="tituloPequeno">Paula Ramos</p>
                                    <span class="material-symbols-outlined" style="text-align: right; color: #0352A8;"> gradegradegradegradestar_half</span>
                                </div>

                                <p id="" class="textoPadrao" style="margin: 5%;">Chegou um dia depois do prazo, porém o produto veio perfeito de acordo com o anúncio!</p>
                            </div>

                            <hr>
                            <!-- Avaliação 3 -->
                            <div id="avaliacao3-">
                                <div id="" class="" style="display: grid; grid-template-columns: 2fr 1fr; margin: 5%;">
                                    <p class="tituloPequeno">Victor Gabriel</p>
                                    <span class="material-symbols-outlined" style="text-align: right; color: #0352A8;"> gradegradegradegradegrade</span>
                                </div>

                                <p id="" class="textoPadrao" style="margin: 5%;">Adorei, muito linda, atendeu minhas necessidades!</p>
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>
        </section>

        <section id="secaoTermosDeCompra" data-tab-content>
            <div class="margemPadrao" style="padding-top: 3%;">
                <p class="tituloPadrao">TERMOS DE COMPRA</p> <br>

                <p class="textoPadrao">
                    De acordo com os Termos de Compras da Prototipei, o produto adquirido acima só poderá ser trocado em duas condições, 
                    sendo elas: <br> <br>

                <b>1. Troca por defeito</b> - Caso o produto apresente algum defeito, a troca poderá ser solicitada dentro do prazo de 30 dias 
                após a entrega do produto. <a href="termos.html">Clique aqui caso queira saber mais</a>. <br> <br>

                <b>2. Devolução por arrependimento</b> -  Conforme o Código de Defesa do Consumidor (Lei nº 8.078, de 11 de setembro de 1990), 
                o cliente tem o direito de solicitar a devolução por arrependimento somente dentro de 7 dias após o recebimento do produto. 
                <a href="termos.html">Clique aqui caso queira saber mais</a>. <br> <br>

                Situações de troca fora do prazo estipulado e fora dos parâmetros solicitados, não serão aceitas. Para mais informações 
                entre em contato conosco.
                </p>
            </div>
        </section>

        <!-- FOOTER -->
        <div class="margemSuperior" style="background-color: #047EFF; height: 8vh;"></div>

        <footer style="margin-top: 0%;">
            <div class="padroesSecaoFlexDirectionRow" style="padding: 5% 0%;">
                <div style="place-content: center; width: 30%;">
                    <img src="../src/Imagens/logoBranca.png" width="100%"/>
                </div>

                <hr>

                <div style="width: 30%;">
                    <p class="textoPadraoBranco">©2024, Prototipei. <br> Todos os direitos reservados.</p>
                </div>

                <div class="padroesSecaoFlexDirectionColumn" style="gap: 0vw; width: 40%;">
                    <p class="textoPadraoBranco" style="text-align: right; ">prototipeiltda@gmail.com <br> R. Miguel Ortega, 135</p>
                </div>
            </div>
        </footer>

        <script src="../src/js/tabs.js"></script>
        <script src="../src/js/avaliacoes.js"></script>
        <script type="module">
            // Configuração do Firebase
            import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
            import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";
    
            const firebaseConfig = {
                apiKey: "AIzaSyBVMWxw3ubEE6HWWxzu1H_BhnWzRXQwd2g",
                authDomain: "prototipei.firebaseapp.com",
                projectId: "prototipei",
                storageBucket: "prototipei.firebasestorage.app",
                messagingSenderId: "507053339898",
                appId: "1:507053339898:web:efac2b22db7bde679d4543"
            };
    
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);
    
            async function atualizarEstoque() {
                try {
                    // Consultando o estoque da estufa
                    const estufaRef = doc(db, "estoque", "Estufa");
                    const estufaDoc = await getDoc(estufaRef);
                    if (estufaDoc.exists()) {
                        const qt_e = estufaDoc.data().QT_E; // Quantidade da estufa
                        localStorage.setItem("qt_e", qt_e); // Armazenando no localStorage
                    } else {
                        console.log("Documento 'Estufa' não encontrado!");
                    }
    
                    // Consultando o estoque da porta
                    const portaRef = doc(db, "estoque", "Porta");
                    const portaDoc = await getDoc(portaRef);
                    if (portaDoc.exists()) {
                        const qt_p = portaDoc.data().QT_P; // Quantidade da porta
                        localStorage.setItem("qt_p", qt_p); // Armazenando no localStorage
                    } else {
                        console.log("Documento 'Porta' não encontrado!");
                    }
    
                    // Atualizando as informações na página
                    const qt_e = localStorage.getItem("qt_e");
                    const qt_p = localStorage.getItem("qt_p");
    
                    const estoqueDiv = document.getElementById("estoque");
                    if (qt_e || qt_p) {
                        estoqueDiv.innerHTML = `
                            <p>Estoque: ${qt_e || "N/A"}</p>
                        `;
                    } else {
                        estoqueDiv.innerText = "Nenhuma informação do estoque foi encontrada.";
                    }
    
                } catch (error) {
                    console.error("Erro ao atualizar estoque:", error);
                }
            }
    
            // Chamando a função para atualizar o estoque ao carregar a página
            atualizarEstoque();
    
            // Exibindo informações do usuário
            const dadosUsuario = JSON.parse(localStorage.getItem("dadosUsuario"));
            if (dadosUsuario) {
                const enderecoDiv = document.getElementById("Endereço");
                enderecoDiv.innerHTML = `
                    <p>Endereço: ${dadosUsuario.endereco || "N/A"}</p>
                `;
            } else {
                console.log("Nenhuma informação do usuário encontrada.");
            }
        </script>
    </body>
</html>
